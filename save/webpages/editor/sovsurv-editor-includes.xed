<?xml version="1.0" encoding="ISO-8859-1"?>

<xed:template xmlns:xed="http://www.mycore.de/xeditor" xmlns:mir="http://www.mycore.de/mir">

  <xed:template id="sovsurv.admin.fields">
    <xed:include ref="failed-validation-messages" />

    <xed:bind xpath="../../../../service">
      <xed:include ref="status" />
    </xed:bind>
                                                                  <!-- Anforderungen: SovSurv-3 -->
    <xed:include ref="genre" />                                   <!-- Type -->
    <xed:include ref="toc-layout" />
    <xed:include ref="title.complex.repeated" />                  <!-- Title -->
    <xed:include ref="person.repeated" />                         <!-- Author & Persons & Corporation 5x -->
    <xed:include ref="date.range.extended.datetimepicker" />      <!-- Date -->
    <xed:include ref="place" />                                   <!-- Location -->
    <xed:include ref="creator.place" />                           <!-- Location of interview -->
    <xed:include ref="geographic.complex" />                      <!-- places mentioned -->
    <xed:include ref="cartographics.repeat" />                    <!-- Geo Coordinates-->

    <xed:include ref="extent" />                                  <!-- Size -->
    <xed:include ref="type.of.resource" />                        <!-- sourceDesc -->
    <xed:include ref="language" />                                <!-- Language-->
                                                                  <!-- Language of interview/document-->
                                                                  <!-- Language of translation -->
    <xed:include ref="rights" />                                  <!-- License -->
    <xed:include ref="shelfmark.repeated" />                      <!--  archival number -->
    <xed:include ref="subject.complex" />                         <!-- keywords -->
    <xed:include ref="abstract.repeated" />                       <!-- Abstract -->
    <xed:include ref="comment.complex" />                         <!-- Comment -->
    <xed:include ref="related.item.search.of.all.items" />        <!-- relation to other materials -->
                                                                  <!-- TODO: ? Wir bilden derzeit nicht alle Relationen ab, Teilweise ist der Hintergrund noch unklar.
                                                                      >> isPartOf
                                                                      >> isReferencedBy
                                                                      >> isReplacedBy
                                                                      >> isRequiredBy
                                                                      >> hasPart
                                                                    -->
                                                                    <!-- TODO: Place of birth of Interviewee -->
    <xed:include ref="project.hidden" />                          <!-- Adds the project ID to the meta data hiddenly -->


    <xed:include ref="cancel.submit" />
    <xed:include ref="cleanup-rules" />
    <xed:include ref="validation-rules" />

    <xed:include ref="javascript" />
    
    <!-- frame for modal window -->
    <xed:include ref="modal.name" />
    <xed:include ref="modal.body" />
  </xed:template>

  <!-- genres -->
  
  <xed:template id="genres.interview">
    <xed:include ref="sovsurv.admin.fields" />
  </xed:template>

  <xed:template id="genres.memoir">
    <xed:include ref="sovsurv.admin.fields" />
  </xed:template>
  
  <xed:template id="genres.report">
    <xed:include ref="sovsurv.admin.fields" />
  </xed:template>
  
  <xed:template id="genres.official">
    <xed:include ref="sovsurv.admin.fields" />
  </xed:template>
  
  <xed:template id="genres.poem_or_song">
    <xed:include ref="sovsurv.admin.fields" />
  </xed:template>
  
  <xed:template id="genres.inscription">
    <xed:include ref="sovsurv.admin.fields" />
  </xed:template>
  
  <xed:template id="genres.school_essay">
    <xed:include ref="sovsurv.admin.fields" />
  </xed:template>
  
  <xed:template id="genres.diary">
    <xed:include ref="sovsurv.admin.fields" />
  </xed:template>
  
  <xed:template id="genres.letter">
    <xed:include ref="sovsurv.admin.fields" />
  </xed:template>
  
  <xed:template id="genres.propaganda_material">
    <xed:include ref="sovsurv.admin.fields" />
  </xed:template>
  
  <xed:template id="genres.official_document">
    <xed:include ref="sovsurv.admin.fields" />
  </xed:template>

  <!-- fields -->
  <xed:template id="person.repeated">
    <xed:bind xpath="mods:name[@type='personal'][mods:role/mods:roleTerm[@authority='marcrelator'][@type='code']='aut']" />
    <xed:bind xpath="mods:name[@type='personal'][mods:role/mods:roleTerm[@authority='marcrelator'][@type='code']='isb']" />
    <xed:bind xpath="mods:name[@type='personal'][mods:role/mods:roleTerm[@authority='marcrelator'][@type='code']='ivr']" />
    <xed:bind xpath="mods:name[@type='personal'][mods:role/mods:roleTerm[@authority='marcrelator'][@type='code']='ive']" />
    <xed:bind xpath="mods:name[@type='personal'][mods:role/mods:roleTerm[@authority='marcrelator'][@type='code']='scr']" />
    <mir:person.extended.repeated help-text="{i18n:mir.help.research.data.person}">
      <option value="rcp">
        <xed:output i18n="mir.role.addressee" />
      </option>
      <option value="aut">
        <xed:output i18n="mir.role.author" />
      </option>
      <option value="isb">
        <xed:output i18n="mir.role.issuing_body" />
      </option>
      <option value="ive">
        <xed:output i18n="mir.role.interviewee" />
      </option>
      <option value="ivr">
        <xed:output i18n="mir.role.interviewer" />
      </option>
      <option value="scr">
        <xed:output i18n="mir.role.stenographer" />
      </option>
    </mir:person.extended.repeated>
  </xed:template>

  <xed:template id="project.hidden">
    <xed:bind xpath="mods:classification[@authority='projects']" initially="SovSurv">
      <input id="projects" type="hidden" />
    </xed:bind>
  </xed:template>

  <xed:template id="shelfmark.repeated">
    <mir:textfield xpath="mods:location/mods:shelfLocator" label="mir.shelfmark" repeat="true" min="1" max="10" help-text="{i18n:mir.help.shelfmark}" />
  </xed:template>

</xed:template>
